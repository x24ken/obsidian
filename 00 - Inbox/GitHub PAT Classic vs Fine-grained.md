# GitHub PAT: Classic vs Fine-grained tokens

## Classic PAT（従来型）
### 特徴
- **広範なOAuth風スコープ**: repo、admin:org、workflow等のスコープがアクセス可能な全リポジトリに適用
- **自動的な全リポジトリアクセス**: プライベート、内部、パブリック全てのアクセス可能リポジトリに到達
- **有効期限はオプション**: 無期限設定可能（12ヶ月未使用で自動失効）
- **組織の承認不要**: 管理者による個別トークンの確認・承認は不可

### 利点
- 外部パブリックリポジトリへの書き込み可能
- 複数組織にまたがるアクセス
- 全APIエンドポイントサポート
- レガシーシステムとの互換性

## Fine-grained PAT（詳細設定型）
### 特徴
- **きめ細かい権限設定**: リポジトリごと、機能ごとに読み取り/書き込み/管理を個別設定
- **限定的なリポジトリアクセス**: 選択したオーナー配下の特定リポジトリのみ
- **有効期限の制限**: デフォルト366日以下（組織が設定）
- **組織による承認制御**: 管理者がトークンごとに承認・取り消し可能

### 利点
- 最小権限の原則を実現
- 漏洩時の影響範囲を限定
- ユーザーあたり最大50トークン作成可能
- 監査とコンプライアンス対応

## 使い分けガイド

### Fine-grainedを選ぶべき場合
- 特定のリポジトリのみアクセスする内部自動化
- セキュリティ要件が厳しい組織
- CI/CDパイプラインの専用トークン
- 短期間のローテーションが必要

### Classicを選ぶべき場合
- 外部パブリックリポジトリへのPR作成
- 複数組織にまたがるスクリプト
- まだFine-grained未対応のAPIを使用
- 外部コラボレーターとしてのアクセス

## 比較表
| 項目 | Classic | Fine-grained |
|------|---------|--------------|
| 権限範囲 | 広範なスコープ | リポジトリ・機能別 |
| リポジトリ到達 | 全アクセス可能 | 明示的に許可のみ |
| 組織承認 | 非対応 | オプション |
| 有効期限 | オプション | デフォルト366日以下 |
| API対応 | 完全 | 一部未対応 |
| 最適用途 | レガシー・広範囲 | 最小権限・内部自動化 |

## 注意点
- 2025年8月時点でFine-grainedはGitHub PackagesやChecks APIが未対応
- 長期的なサーバー間アクセスにはGitHub App推奨
- パブリックリポジトリへのプッシュが公開されると自動失効