**タイプ**: 📊 Analysis

## 📝 一行要約
Streamable HTTPは動的にストリーミングを選択できる双方向通信プロトコルであり、従来のFTP/SFTPなどファイル転送プロトコルと比較して、Webアプリケーション・API通信では優位性が高いが、サーバー間バックアップや大量ファイル同期には不向き。

## 🎯 分析対象
Streamable HTTPプロトコルとファイル転送プロトコル（FTP/SFTP/SCP/rsync等）の技術的特性と適用領域の違い

## 🔍 分析基準・枠組み
以下の6つの軸で比較評価：
1. **通信モデル**: 双方向性・リアルタイム性
2. **インフラ互換性**: ファイアウォール・CDN・プロキシとの親和性
3. **効率性**: メモリ使用量・レイテンシー・帯域幅
4. **信頼性**: エラーハンドリング・リジューム機能・整合性保証
5. **開発体験**: ブラウザサポート・デバッグ容易性・既存ツールとの統合
6. **適用領域**: ユースケースごとの最適性

## 📈 証拠・データ

**Streamable HTTPの特徴**:
- 単一エンドポイントで動的に`application/json`と`text/event-stream`を切り替え
- HTTPSで暗号化標準、既存のHTTPインフラをそのまま利用可能
- サーバーレス環境・ロードバランサーとの相性が良い
- ブラウザネイティブサポート（Fetch API + EventSource相当）
- Model Context Protocol（2025年3月仕様）で採用

**ファイル転送プロトコルの特徴**:
- ファイル単位の完全転送・リジューム機能・整合性チェック
- パーミッション・タイムスタンプ保持
- 大量の小ファイル転送に最適化（rsync）
- サーバー間通信で広く使用
- FTPは暗号化なし（SFTPやSCPは暗号化あり）

## 🧠 解釈・推論

**Streamable HTTPが優れる場面**:
- **Webアプリケーション**: ブラウザから直接利用可能、ファイアウォール通過が容易
- **API通信**: RESTやGraphQLとの統合が自然、認証・トレーシングが簡単
- **リアルタイム性重視**: サーバーからクライアントへの即座の通知（進捗表示など）
- **サーバーレス環境**: Lambda・Cloud Functionsなど状態を持たない環境でも動作

**ファイル転送プロトコルが優れる場面**:
- **サーバー間バックアップ**: ファイル属性の完全保持、差分転送の効率性
- **大量小ファイル転送**: rsyncの高速化アルゴリズム
- **帯域制限環境**: リジューム機能による中断・再開
- **レガシーシステム**: 既存のFTPインフラが整っている環境

## 📊 結論・判断

**2025年時点での推奨**:
- **新規Webアプリケーション・API**: Streamable HTTPを採用すべき（HTTPSベースで統一、開発体験が優れる）
- **サーバー間ファイル同期**: SFTP/rsyncを継続利用（信頼性・効率性が実証済み）
- **ハイブリッド戦略**: ユーザー向けはStreamable HTTP、バックエンドはSFTP/rsync

Streamable HTTPは「動的ストリーミング選択」という設計により、従来のHTTP + SSEパターンやWebSocketの課題を解決。ファイル転送プロトコルを完全に置き換えるものではなく、異なるユースケースに特化した技術として共存する。

## ⚠️ 限界・反証

**Streamable HTTPの弱点**:
- ファイル属性（パーミッション・タイムスタンプ）の保持が困難
- 大量ファイルの一括転送では効率が劣る
- リジューム機能が`Last-Event-ID`に依存し、実装が複雑
- MCPでの採用例はあるが、まだ標準化されていない（2025年3月時点）

**ファイル転送プロトコルの弱点**:
- ブラウザから直接利用不可（WebベースUIが必要）
- ファイアウォールで専用ポート（21/22）がブロックされることがある
- リアルタイム通信には不向き（ポーリングが必要）

## 💡 なぜ重要か

この比較分析は、モダンなシステム設計において「プロトコル選択」が単なる技術的好みではなく、ユースケースに基づく戦略的判断であることを示す。Streamable HTTPの登場により、従来「WebSocketかSSEか」という二択だったリアルタイム通信の設計が「必要な時だけストリーミング」という第三の選択肢を得た。一方で、ファイル転送プロトコルは50年以上の歴史（FTPは1971年誕生）を持ち、信頼性と効率性が実証されている。適切な技術選択は、システムの保守性・拡張性・コストに直結する。

## つながり

← [[Streamable HTTPプロトコル]]：比較対象の一方
↔ [[HTTP + SSEパターン]]：Streamable HTTPの前身技術
→ [[WebSocket]]：リアルタイム通信の代替技術

## 📚 参照元
> [Model Context Protocol - Transports](https://modelcontextprotocol.io/docs/concepts/transports)
> [Why MCP Deprecated SSE and Go with Streamable HTTP - FKA Blog](https://blog.fka.dev/blog/2025-06-06-why-mcp-deprecated-sse-and-go-with-streamable-http/)
> 個人体験, 2025-10-04
