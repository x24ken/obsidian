**タイプ**: 📋 Guide

## 📝 一行要約
pnpmワークスペースのカタログ機能を使用して、モノレポ内の依存関係バージョンを一元管理し、デフォルトと名前付きカタログで柔軟に制御する方法。

## 🎯 最終ゴール
モノレポ内のすべてのパッケージで依存関係バージョンを統一管理し、メンテナンス性とチーム間の一貫性を向上させる。

## 🔧 実行手順
1. `pnpm-workspace.yaml`にカタログセクションを追加し、デフォルトカタログを定義
2. 用途別（testing、build、legacy等）の名前付きカタログを必要に応じて作成
3. 各package.jsonで`catalog:`プロトコルを使用して依存関係を参照
4. changesetsを導入してバージョン管理フローを確立
5. `pnpm catalog update`コマンドでカタログ全体のバージョンを更新

## ⚠️ 注意点・罠
- pnpm v9.5.0以降でのみ利用可能
- カタログ参照と直接指定を混在させる場合は、その理由を明確にドキュメント化
- 名前付きカタログの乱用は複雑性を増すため、本当に必要な場合のみ使用

## ✅ 成功の指標
- 全パッケージで共通依存関係のバージョンが一致
- `pnpm -r update`で一括更新が正常に動作
- 新規パッケージ追加時にカタログからの参照が標準化される

## 💡 なぜ重要か
従来のモノレポでは各package.jsonで個別にバージョン管理していたため、依存関係の不整合が発生しやすかった。カタログ機能により、宣言的に一元管理できるようになり、大規模プロジェクトでの保守性が飛躍的に向上する。

## つながり
← [[JavaScriptパッケージ公開ツール比較分析]]：pnpmを含むパッケージマネージャーの比較
→ [[TypeScript二段階ビルドパターン]]：モノレポでのビルド戦略
→ [[Vite]]：カタログで管理されるビルドツールの例

## 📚 参照元
> [pnpm Catalogs Documentation - pnpm.io](https://pnpm.io/catalogs)