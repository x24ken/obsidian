---
type: concept
emoji: 🔍
tags:
  - AI
  - RAG
  - ナレッジマネジメント
  - LLM
created: 2025-11-29
---

# Knowledge Base

## 要約

Knowledge Base（KB）とは、AIシステムが参照するために構造化・整理された外部知識の集合体。特にLLM時代においては、RAG（Retrieval-Augmented Generation）アーキテクチャでモデルの知識不足を補完し、ハルシネーション（幻覚）を減らす重要なコンポーネントとして機能する。

## 定義

**Knowledge Base（ナレッジベース）**: 特定の目的のためにAIシステムが効率的にアクセス・検索できる形式で保存された情報の体系。以下の特性を持つ：

1. **構造化**: スキーマや形式が定義されている
2. **検索可能**: クエリに対して適切な情報を返せる
3. **機械可読**: AIが直接処理できる形式（JSON、YAML、ベクトルなど）
4. **更新可能**: 新しい情報の追加・修正が容易

## 歴史的変遷

### 第1世代：ルールベースKB（1970-1990年代）
- エキスパートシステムでのIF-THENルール集
- 例：医療診断システムMYCIN、故障診断システム

### 第2世代：データベース型KB（1990-2010年代）
- 構造化データベース（SQL）
- オントロジー（RDF、OWL）
- 企業ナレッジマネジメントシステム

### 第3世代：ベクトル埋め込み型KB（2020年代〜）
- LLMとの組み合わせ（RAG）
- ベクトルデータベース（Pinecone、Weaviate、Chroma）
- セマンティック検索による柔軟な情報取得

## RAGにおけるKBの役割

```
ユーザークエリ
    ↓
[1] ベクトル化（Embedding）
    ↓
[2] KB検索（類似度ベース）
    ↓
[3] 関連情報の取得
    ↓
[4] LLMへのコンテキスト注入
    ↓
回答生成
```

### KBが解決する問題

- **知識の鮮度**: LLMの学習データより新しい情報を提供
- **ハルシネーション削減**: 根拠のある情報源から回答生成
- **ドメイン特化**: 企業固有・専門分野の知識を補完
- **プライバシー**: モデル再学習なしで秘匿情報を活用

## KB設計の4原則

### 1. 粒度（Granularity）
**1チャンク＝1概念** の原則
- 細かすぎ: コンテキスト不足
- 粗すぎ: ノイズ情報の混入

### 2. メタデータ（Metadata）
検索精度を高める付加情報
```yaml
- content: "実際の内容"
  metadata:
    source: "出典"
    date: "2025-11-29"
    category: "技術/ビジネス"
    confidence: "high"
```

### 3. 更新戦略（Update Strategy）
- **静的KB**: 固定された知識（世界観設定、製品仕様）
- **動的KB**: リアルタイム更新（ニュース、市場データ）
- **ハイブリッド**: 基盤知識＋差分更新

### 4. アクセスパターン（Access Pattern）
- **全文検索**: キーワードマッチ
- **セマンティック検索**: 意味的類似性
- **ハイブリッド検索**: 両者の組み合わせ

## 実装形態の分類

### A. ファイルベースKB
```
kb/
├── characters/     # YAMLでキャラ設定
├── world/          # Markdownで世界観
└── style/          # テンプレート
```
- **メリット**: Git管理可能、人間可読
- **デメリット**: 大規模化で検索速度低下

### B. ベクトルDBベースKB
- Pinecone、Weaviate、Chroma
- **メリット**: セマンティック検索、スケーラブル
- **デメリット**: インフラコスト、複雑性

### C. ハイブリッドKB
- 構造化データ（YAML）+ ベクトル検索
- **メリット**: 柔軟性と性能の両立
- **デメリット**: 設計・実装コスト

## 具体例：小説生成AIのKB

```yaml
# kb/characters/主人公.yaml
name: "田中太郎"
age: 17
personality:
  - "内向的だが正義感が強い"
  - "論理的思考を好む"
speech_style:
  - pattern: "...そうか"
    context: "納得したとき"
  - pattern: "待ってくれ"
    context: "異議を唱えるとき"
relationships:
  - character: "鈴木花子"
    relation: "幼なじみ"
    call_name: "花子"
```

このKBをRAGで使用：
1. シーンに必要なキャラ情報を検索
2. LLMのプロンプトに注入
3. 設定に沿った台詞・行動を生成

## つながり

← [[AIエージェント]]：エージェントが参照する外部知識源として機能
↔ （現在関連するノートはありません）
→ （現在関連するノートはありません）

## 参考

- Retrieval-Augmented Generation (RAG)アーキテクチャ
- ベクトルデータベース技術
- Zettelkasten方法論（人間用KBとの対比）
