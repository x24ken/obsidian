**タイプ**: 🔍 Concept

## 📝 一行要約
MCPサーバーがクライアント側のLLMを再帰的に呼び出すことでエージェント的な自律動作を実現する仕組み

## 🎯 核心的定義
サンプリング（Sampling）は、MCPサーバーがクライアント側に対して「LLMインタラクションを開始する」要求を送る機能。サーバー側が主導してAIモデルを呼び出し、その結果を受け取って次の処理を決定する再帰的なエージェント動作を実現する。

## 🌟 主な構成要素
- **サーバー主導の呼び出し**: 通常はクライアント→サーバーだが、逆方向の通信
- **再帰的実行**: LLMの応答を元にさらにLLMを呼び出す
- **エージェント動作**: 自律的な意思決定と行動のループ
- **コンテキスト維持**: 一連のやり取りを通じた状態管理

## 🔄 関連概念との違い
通常のツール実行は「クライアント→サーバー」の一方向だが、サンプリングは「サーバー→クライアント」の逆方向。サーバー側が複雑な処理フローを制御し、必要に応じてLLMの推論を求めることができる。

## 💡 なぜ重要か
単純なリクエスト・レスポンスを超えた複雑なエージェント動作を可能にする。サーバー側が複数ステップの処理を自律的に実行し、途中でLLMの判断を挟むことで、より高度な問題解決が実現する。これがAIエージェントの自律性を支える。

## つながり

← [[MCP]]：MCPの6機能の1つ（クライアントがサーバーに提供）
↔ [[MCPツール機能]]：ツール実行後のサンプリングによる再帰処理
→ [[MCPルート機能]]：サンプリング中のファイルアクセス権限確認

## 📚 参照元
> 個人体験（画像分析）, 2025-11-03
