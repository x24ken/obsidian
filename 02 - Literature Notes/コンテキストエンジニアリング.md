**タイプ**: 🔍 Concept

## 📝 一行要約
コンテキストエンジニアリングとは、LLMが推論時に「見る」すべての情報・ツール・ルールを設計・組み立て・管理し、関連性・正確性・コンプライアンスを最大化する新しい規律。

## 🎯 核心的定義
コンテキストエンジニアリングは、AIモデルが推論時に利用できるすべての要素（ドキュメント、構造化データ、会話履歴、ツール/API、ユーザー状態、ポリシー、出力スキーマ）を戦略的に設計・構築し、モデルの「状況認識」を最適化する技術分野。Gartnerは「データ・ワークフロー・環境を構造化し、AIシステムが意図を理解しエンタープライズ要件に沿った成果を出す」と定義している。

## 🌟 主な構成要素

### 1. コンテキストウィンドウとトークン予算
- モデルの「作業記憶」を管理
- Claude最新モデルは200K〜1Mトークンだが、適切なフィルタリングと順序付けが必須

### 2. グラウンディング/RAG（検索拡張生成）
- 最も関連性の高いエビデンスを検索・ランク付け・フォーマット
- 現代のRAGは「エージェント的検索」（クエリ分解、並列サブクエリ、リランキング）を採用

### 3. ツール使用と出力契約
- JSON Schemaで明確に定義されたツール（関数/API）
- 構造化出力により信頼性と機械可読性を確保

### 4. オーケストレーションとプロトコル
- LangGraph/LangChainなどのオーケストレータ
- MCP（Model Context Protocol）：データ・ツール接続の標準化

### 5. メモリと状態管理
- セッション/プロジェクト間でのコンテキスト永続化
- 権限管理を伴う組織コネクター

### 6. セキュリティとガバナンス
- 取得データを信頼できないものとして扱う
- プロンプトインジェクション防御、コンテキスト分離、マルチテナントアクセス制御

### 7. 評価
- グラウンディング、検索品質、関連性、完全性を測定
- これらの指標でチャンキング・検索・フォーマットを調整

## 🔄 プロンプトエンジニアリングとの違い

| 側面 | プロンプトエンジニアリング | コンテキストエンジニアリング |
|------|------------------------|--------------------------|
| **焦点** | 指示の文言設計 | 情報と能力の環境設計 |
| **スコープ** | システム/ユーザーメッセージ、Few-shot例 | 検索パイプライン、メモリ、ツールアクセス、セキュリティ境界 |
| **比喩** | 「どう尋ねるか」 | 「モデルが今何を知り、何ができるか」 |
| **位置付け** | 薄いテンプレート | 動的に組み立てられる豊かなコンテキスト |

**Mental Model**: プロンプトは指示、コンテキストはモデルの状況認識。両者が品質を決定するが、本番環境の信頼性にはコンテキストを優先すべき。

## 💡 なぜ重要か

### エンタープライズでの必要性
- 巧妙なプロンプト調整よりも、キュレーションされた進化するコンテキストへの焦点シフト
- AIシステムが意図を理解し、企業要件に沿った成果を出すために不可欠
- アドホックなプロンプト微調整よりも、体系的なコンテキスト設計が信頼性の高い結果をもたらす

### 2024-2025年の主要トレンド
1. **長文コンテキストモデルの登場**: Claude Sonnet 4（1Mトークン）など
2. **エージェント的検索**: マルチクエリ、エージェント支援型検索がRAGの新基準に
3. **標準化の進展**: MCP採用によりM×Nカスタム統合を削減
4. **コンテキスト効率化研究**: AttentionRAG、RECON、Sculptorなどのプルーニング手法
5. **業界の認識変化**: Gartnerなどが信頼性のためコンテキストエンジニアリング優先を明示

## つながり

↔ [[AIエージェント]]：コンテキストエンジニアリングがエージェントの性能を最大化
→ [[MCP]]：コンテキスト組み立ての標準プロトコル実装
→ [[MCPプロンプト機能]]：コンテキスト管理の具体的実装例
